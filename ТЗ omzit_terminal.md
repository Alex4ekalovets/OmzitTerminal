### Цель:
Автоматизация процессов планирования, выдачи (распределения), выполнения и приёмки (закрытия) сменного задания на рабочем центре. Также дополнительный процесс для автоматизации - доступ на чтение чертежей своего сменного задания с терминала рабочего центра.
___
### Сущности для создания:
#### График цеха.
График вида *"цех - изделие - дата готовности - процент готовности"*. Основное рабочее место диспетчера. 
Процент готовности рассчитывается в зависимости от количества выполненных СЗ.
___
#### График рабочих центров.
График РЦ - график вида: *"РЦ - Дата распределения - №изделия (заказа) - СЗ (операция) - плановая трудоемкость - исполнитель - статус - фактическая трудоемкость"*
Основное рабочее место диспетчера и мастера.
В графике РЦ отображаются статусы СЗ:
- ***не запланировано*** - СЗ не запланировано на РЦ, а только на цех (процесс планирования); 
- ***запланировано*** - СЗ запланировано на РЦ (процесс планирования);
- ***распределено*** - СЗ запланировано на РЦ и на ФИО рабочего (процесс распределения); 
- ***выполняется*** - СЗ принято рабочим к выполнению (процесс выполнения СЗ).
- ***ожидание мастера*** - СЗ выполнено, либо у рабочего возникли вопросы к мастеру. Мастеру отправлено уведомление об ожидании  (процесс выполнения СЗ); 
- ***ожидание контролёра*** - СЗ выполнено, проведена первичная приёмка мастером, мастер выполнил вызов контролёра на РЦ, контролёру отправлено уведомление об ожидании (процесс приёмки СЗ);
- ***принято***, ***не принято***, ***брак*** - СЗ закрыто по решению контролёра (процесс приёмки СЗ); 

Соответствующая часть графика РЦ в реальном времени транслируется на терминал РЦ. Также полный график РЦ доступен мастерам, диспетчерам, котроллерам и транслируется на контролирующие мониторы и рабочие места в ПДО, ОТК, цех, директору по производству и т.д. (рабочее место руководителя).
Предварительное построение графика РЦ (без дат и со статусом *не запланировано*) происходит автоматически после создания графика цеха. 
При трансляции в зависимости от статусов записи имеют разную цветовую индикацию, например, на терминале РЦ выполненные СЗ имеют зелёную подсветку и пропадают только на следующий день. Забракованные СЗ имеют красную подсветку. 
___
#### Рабочее место.
Страница в браузере передаваемая сервером пользователю с содержанием и функционалом в зависимости от роли пользователя. 
Выделяются рабочие места и роли:
- ***Администратор*** - полный доступ ко всем рабочим местам, возможность редактировать все записи.
- ***Диспетчер*** (планировщик) - доступ на редактирование к графику цеха, графику РЦ. 
- ***Мастер*** - доступ на редактирование графика РЦ, доступ на чтение графика цеха.
- ***Контролёр*** - доступ на редактирование графика РЦ.
- ***Терминал РЦ*** - страница для трансляции в реальном времени (частота обновления не реже раз в 10 сек) состояния СЗ на соответствующем РЦ. 
- ***Терминал трансляции*** - страница для трансляции в реальном времени (частота обновления не реже раз в 10 сек) состояний всех СЗ на всех РЦ.
- ***Руководитель*** - доступ на чтение всех графиков, доступ на просмотр всех терминалов.
- **Технолог** - доступ к графику РЦ, к функционалу обновления технологической базы.
___
### Процесс планирования СЗ.
- Из имеющихся excel файлов технологических процессов читается список сменных заданий на каждое изделие. Каждое СЗ записывается в базу данных в отдельную таблицу технологических данных. В случае если были изменения в файлах excel ТП (анализируется дата последнего сохранения и "Дата/время прочтения СЗ"), то происходит обновление всех записей по данному изделию. Данный пункт выполняется автоматически при начале заполнения графика цеха (*либо периодически по всей номенклатуре ночью (т.к. процесс будет длительный), либо по кнопке от технолога после внесения им изменений (потребуется дополнительное рабочее место технолога)).*  
    - `Появляется запись в БД со всеми технологическими данными в отдельной таблице tech_data. `
    - `Присваивается "Дата/время прочтения СЗ".`
- При поступлении в заказ нового изделия - диспетчер, на своём рабочем месте, выполняет планирование графика цеха. 
    - `Появляется запись в таблице st_table БД с копией необходимых технологических данных.`
    - `Присваивается номер изделия. `
    - `Присваивается статус СЗ "не запланировано".`
    - `Присваивается "Дата/время планирования изделия".`
    - `Присваивается "Изделие запланировал диспетчер ФИО".`
- После планирования графика цеха в графике РЦ выставляется дата выполнения СЗ на каждом РЦ. 
    - `Статус СЗ меняется на "запланировано".`
    - `Присваивается "Дата/время планирования СЗ на РЦ".`
    - `Присваивается "СЗ запланировал диспетчер ФИО".`
___
### Процесс распределения СЗ.
- После выполнения планирования СЗ на РЦ, мастер (допустимо диспетчер) на своём рабочем месте (допустимо с мобильного устройства) в графике РЦ заполняет ФИО исполнителя. 
    - `Статус СЗ меняется на "распределено".`
    - `Присваивается "СЗ распределил мастер ФИО".`
    - `Присваивается "Дата/время распределения СЗ на РЦ".`
___
### Процесс выполнения СЗ.
- Перед началом выполнения работ рабочий на терминале выбирает строку СЗ со своей фамилией и нажимает кнопку ***"сменное задание"***. 
- На терминале визуально строка меняет цвет о отображается статус ***"выполняется"***.
    - `Присваивается "Дата/время начала работ".`
    - `Статус СЗ меняется на "выполняется".`
- После начала выполнения работы рабочим в случае если возникли    вопросы или работа выполнена и готова к первичной приёмки мастером рабочий нажимает на пульте терминала кнопку ***"вызов мастера"***. 
- Мастеру, ответственному за РЦ, отправляется личное сообщение через telegram бота, либо СМС, либо через другое приложение (допустимо организовать группу мастеров для рассылки и для контроля процесса начальником цеха).  
    - `Присваивается "Дата/время вызова мастера" (если несколько вызовов, то дополняется строка через символ "-". Eсли не было вызовов, то пустое значение - null)`
    - `Присваивается "Количество вызовов мастера" (cуммируется количество вызовов.  Eсли не было вызовов, то значение = 0)`
    - `Присваивается статус "ожидание мастера"`
   
___
### Процесс закрытия СЗ.
- После проведения первичной приёмки, мастер вызывает контролёра с мобильного устройства или со своего рабочего места. 
- В группу telegram контролёров (либо в специальное приложение)     поступает запрос на контролёра с наименованием РЦ, операции и ФИО мастера.
- Контролёр отвечает на запрос специальной командой через мобильное устройство (либо со своего рабочего места).
- Мастер получает личным сообщением на своё мобильное устройство ФИО ответившего контролёра. 
     - `Присваивается "время окончания работ".`
     - `Присваивается "фактическая трудоёмкость" (дельта между "время начала работ" и "время выполнения работ").`
     - `Присваивается "Мастер ФИО".`
    - `Присваивается "Время вызова котроллера".`
    - `Присваивается статус "ожидание контролёра"`
    - `Присваивается "Контролёр ответил ФИО".`
    - `Присваивается "время ответа котроллера".` 
- Контролёр приходит на рабочее место и выполняет приёмку. 
- Решение приёмки ("принято", "не принято", "брак") контролёр отправляет специальной командой с мобильного устройства. 
    - `Присваивается "Контролёр определил ФИО".`
    - `Присваивается "время приёмки".`
    - `Присваивается "длительность ожидания приёмки" (дельта между "время вызова котроллера" и "время приёмки").`
    - `Присваивается статус "принято" или "не принято" или "брак" в зависимости от решения котнролёра.`
___

### Процесс учёта и актуализации чертежей изделия.
- Для реализации процесса чтения чертежей с РЦ необходимо создать специальную папку с проверенными и утверждёнными чертежами. Помимо чертежей в этой папке находится реестр чертежей в формате .xlsx в котором напротив чертёжного номера проставлен номер рабочего центра на котором данный чертёж доступен для чтения и статусом чертежа "актуален", "неактуален".
- Копирование чертежей и доработку по требованию технолога выполняет конструктор.
- Проверкой чертежей, отправкой на доработку конструктору, ведением реестра чертежей занимается технолог.
- Для контроля времени проверки, времени исправления чертежей и времени актуализации реестра чертежей существует отдельный регламент.
- Если чертёж не имеет статус "актуально" в реестре, то прочитать его невозможно, выдать СЗ невозможно.
___
- ### Процесс чтения чертежей СЗ с терминала РЦ.
- В случае возникновения необходимости необходимости просмотреть рабочую документацию. На пульте терминала рабочий нажимает кнопку ***"чертёж"***. 
    - `На сервер отправляется запрос содержащий номер РЦ.`
    - `Ответом приходит список доступных чертежей. Если чертёж не актуален, то в ответе содержится пометка о недоступности.`
- В появившемся окне со списком доступных чертежей для РЦ терминала с помощью кнопок навигации (стрелок вверх, вниз) выбирает нужный чертёж и нажимает кнопке вправо. 
    - `Полученный ответ визуализируется в окне.`
    - `Если в ответе чертёж доступен. После выбора строки на сервер отправляется полная ссылка на файл чертежа.`
- Происходит открытие чертежа кнопками навигации рабочий может увеличивать масштаб (+-) и двигать картинку в нужном направлении.
    - `Ссылка открывается стандартными средствами браузера для чтения формата .pdf.`
- Чтобы закрыть чертёж и вернуться в режим сменного задания нажимается кнопка ***сменное задание***.










